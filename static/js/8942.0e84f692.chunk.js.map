{"version":3,"file":"static/js/8942.0e84f692.chunk.js","mappings":"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","sources":["pages/common/blog/index.js"],"sourcesContent":["import {\r\n  Button,\r\n  Card,\r\n  Col,\r\n  Form,\r\n  Row,\r\n} from \"react-bootstrap\";\r\nimport DataTableRemote from \"components/data-table\";\r\nimport { Fragment, useEffect, useRef, useState } from \"react\";\r\nimport { commonService, masterService } from \"core/services\";\r\nimport ModalCommon from \"components/modal\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport * as Yup from \"yup\";\r\nimport { CONST, utils } from \"core/helper\";\r\nimport Actions from \"components/actions\";\r\nimport { CKEditor } from \"ckeditor4-react\";\r\nimport BreadCrumb from \"components/common/breadcrumb\";\r\nimport moment from \"moment\";\r\nimport { BLOG_FILTER } from \"core/services/apiURL.service\";\r\nimport Required from \"components/common/required\";\r\n\r\nconst validationSchema = Yup.object().shape({\r\n  title: Yup.string()\r\n    .matches(\"^[0-9a-zA-Z \\b]+$\", \"Invalid title, is required\")\r\n    .required(),\r\n  blogImg: Yup.mixed().required(\"Blog image is required\"),\r\n  description: Yup.string().required(\"Description is required\"),\r\n});\r\n\r\nconst Blog = () => {\r\n  const columns = [\r\n    {\r\n      name: \"Title\",\r\n      selector: (row) => row.title,\r\n    },\r\n    {\r\n      name: \"URI\",\r\n      selector: (row) => row.uri,\r\n    },\r\n    {\r\n      name: \"Author\",\r\n      selector: (row) => row.author,\r\n    },\r\n    {\r\n      name: \"Created At\",\r\n      selector: (row) => moment(row.createdAt).format(\"DD-mm-yyyy\"),\r\n    },\r\n    {\r\n      name: \"Action\",\r\n      cell: (row) => getActions(row),\r\n      ignoreRowClick: true,\r\n      grow: 1,\r\n    },\r\n  ];\r\n\r\n  const { register, handleSubmit, formState, reset, setValue } = useForm({\r\n    resolver: yupResolver(validationSchema),\r\n  });\r\n  const { errors, isSubmitting } = formState;\r\n\r\n  const getActions = (row) => {\r\n    return (\r\n      <Actions\r\n        editOnClick={handleEditBlog}\r\n        viewOnClick={handleViewBlog}\r\n        deleteOnClick={handleDeleteBlog}\r\n        rowId={row.uri}\r\n        id={row._id}\r\n      />\r\n    );\r\n  };\r\n  const fileInputRef = useRef();\r\n  const [pageFor] = useState(\"Blogs\");\r\n  const [blog, setBlog] = useState([]);\r\n  const [data, setData] = useState();\r\n\r\n  const [getData, setGetData] = useState(null);\r\n  const [modalShow, setModalShow] = useState(false);\r\n  const [blogId, setBlogId] = useState(\"\");\r\n  const [descriptionText, setDescriptionText] = useState(\"\");\r\n  const [editorInstance, setEditorInstance] = useState(false);\r\n  const [modalTitle, setModalTitle] = useState(\"\");\r\n  const [totalRows, setTotalRows] = useState(0);\r\n  const [perPage, setPerPage] = useState(10);\r\n  const [img, setImage] = useState(null);\r\n  const [previewImg, setPreviewImg] = useState(null);\r\n  const [imageId, setImageId] = useState(null);\r\n  const [spinner, setSpinner] = useState(true);\r\n  const [filter, setFilter] = useState({ ...CONST.DEFAULT_FILTER });\r\n  const [reloadList, setReloadList] = useState(false);\r\n  const imageDomain = process.env.REACT_APP_IMAGE_PATH;\r\n  const imgSrc =\r\n    imageDomain + data?.blogImg?.imagePath + data?.blogImg?.originalImage;\r\n  const {\r\n    register: search,\r\n    handleSubmit: searchHandleSubmit,\r\n    reset: searchReset,\r\n    formState: { isDirty, isSubmitting: searchIsSubmitting },\r\n  } = useForm();\r\n  const toggleReloadList = () => setReloadList(!reloadList);\r\n\r\n  const onSubmitSearch = async (values) => {\r\n    const { title } = values;\r\n    if (title === \"\") {\r\n      utils.showErrMsg(\"Title is required\");\r\n      return false;\r\n    }\r\n\r\n    setFilter({\r\n      ...filter,\r\n      search: title,\r\n    });\r\n  };\r\n\r\n  const loadBlog = async (id) => {\r\n    const resp = await commonService.getBlog(id);\r\n    if (resp && resp.meta.code === 200) {\r\n      return resp.data;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const onSubmit = (value) =>\r\n    data ? updateBlog(blogId, value) : createBlog(value);\r\n\r\n  const createBlog = async (value) => {\r\n    const { title, description } = value;\r\n    const payload = {\r\n      title,\r\n      description,\r\n      blogImg: imageId,\r\n    };\r\n    const resp = await commonService.createBlog(payload);\r\n    const { meta } = resp;\r\n    if (meta.code === 200) {\r\n      utils.showSuccessMsg(meta.message);\r\n      reset();\r\n      handleModalClose();\r\n      toggleReloadList();\r\n    } else {\r\n      utils.showErrMsg(meta.message);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const updateBlog = async (blogId, value) => {\r\n    const { title, description } = value;\r\n    const payload = {\r\n      title,\r\n      description,\r\n      blogImg: imageId ? imageId : undefined,\r\n    };\r\n    const resp = await commonService.updateBlog(blogId, payload);\r\n    const { meta } = resp;\r\n    if (meta.code === 200) {\r\n      utils.showSuccessMsg(meta.message);\r\n      reset();\r\n      handleModalClose();\r\n      toggleReloadList();\r\n    } else {\r\n      utils.showErrMsg(meta.message);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleImageChange = (event) => {\r\n    const file = event.target.files[0];\r\n    file ? setImage(file) : setImage(null);\r\n  };\r\n\r\n  const handleUploadImg = async () => {\r\n    const formData = new FormData();\r\n    formData.append(\"type\", 30);\r\n    formData.append(\"images\", img);\r\n    const resp = await commonService.imageUpload(formData);\r\n    if (resp && resp.meta.code === 200) {\r\n      setValue(\"blogImg\", img, { shouldValidate: true });\r\n      const { data } = resp;\r\n      setImageId(data[0]._id);\r\n    }\r\n  };\r\n\r\n  const handleCancelBlogImg = () => {\r\n    setPreviewImg(null);\r\n    setImage(null);\r\n    fileInputRef.current.value = null;\r\n  };\r\n\r\n  const handleModalShow = () => setModalShow(true);\r\n\r\n  const handleModalClose = () => {\r\n    setModalShow(false);\r\n    setDescriptionText(\"\");\r\n    reset();\r\n    setPreviewImg(null);\r\n    setImage(null);\r\n    setImageId(\"\");\r\n  };\r\n\r\n  const handleAddBlog = () => {\r\n    handleModalShow();\r\n    setModalTitle(\"Add Blog\");\r\n    setBlogId(\"\");\r\n    setGetData(null);\r\n  };\r\n\r\n  const handleEditBlog = async (id) => {\r\n    const resp = await loadBlog(id);\r\n    setModalTitle(\"Edit Blog\");\r\n    handleModalShow();\r\n    setBlogId(id);\r\n    if (resp) {\r\n      setData(resp);\r\n      setGetData(resp)\r\n      setDescriptionText(resp.description);\r\n      const fields = [\"title\", \"description\"];\r\n      fields.forEach((field) => setValue(field, resp[field]));\r\n      setValue(\"description\", resp.description);\r\n      setValue(\"blogImg\", [resp?.blogImg?._id], { shouldValidate: true });\r\n    }\r\n  };\r\n\r\n  const handleViewBlog = async (id) => {\r\n    const resp = await loadBlog(id)\r\n    if(resp){\r\n      setModalTitle(\"View Blog\");\r\n      handleModalShow();\r\n      setGetData(resp);\r\n    }\r\n  };\r\n\r\n  const handleDeleteBlog = async (uri, id) => {\r\n    const resp = await commonService.deleteBlog(id);\r\n    if (resp && resp.meta.code === 200) {\r\n      utils.showSuccessMsg(resp.meta.message);\r\n      toggleReloadList();\r\n    }\r\n  };\r\n\r\n  const handlePageChange = (page) => {\r\n    setFilter({\r\n      ...filter,\r\n      skip: page > 1 ? (page - 1) * perPage : 0,\r\n    });\r\n  };\r\n\r\n  const handlePerRowsChange = (newPerPage, page) => {\r\n    setPerPage(newPerPage);\r\n    setFilter({\r\n      ...filter,\r\n      skip: page > 1 ? (page - 1) * perPage : 0,\r\n      limit: newPerPage,\r\n    });\r\n  };\r\n\r\n  const handleDescriptionChange = ({ editor }) => {\r\n    const data = editor.getData();\r\n    setValue(\"description\", data);\r\n    setDescriptionText(data);\r\n  };\r\n\r\n  const handleInstanceReady = ({ editor }) => {\r\n    setEditorInstance(editor);\r\n  };\r\n\r\n  const [isComponentMounted, setComponentMounted] = useState(false);\r\n  useEffect(() => {\r\n    const loadAllBlog = async () => {\r\n      setSpinner(true);\r\n      const resp = await masterService.getAllPost(BLOG_FILTER, filter);\r\n      if (resp && resp?.meta?.code === 200) {\r\n        const { data: blogs, pagination } = resp;\r\n        setTotalRows(pagination.totalCount);\r\n        setBlog(blogs);\r\n        setSpinner(false);\r\n      }\r\n    };\r\n    const handleChange = async () => {\r\n      await loadAllBlog(filter);\r\n    };\r\n    if (isComponentMounted) {\r\n      handleChange();\r\n    }\r\n  }, [isComponentMounted, filter, reloadList]);\r\n\r\n  useEffect(() => {\r\n    setComponentMounted(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (editorInstance) {\r\n      editorInstance.setData(descriptionText);\r\n    }\r\n  }, [editorInstance]);\r\n\r\n  useEffect(() => {\r\n    if (editorInstance) {\r\n      editorInstance.setData(descriptionText);\r\n    }\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    if (img) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setPreviewImg(reader.result);\r\n      };\r\n      reader.readAsDataURL(img);\r\n    } else {\r\n      setPreviewImg(null);\r\n    }\r\n  }, [img]);\r\n\r\n  const handleReset = () => {\r\n    searchReset();\r\n    setFilter({\r\n      ...filter,\r\n      search: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <BreadCrumb pageFor={pageFor} />\r\n      <Row>\r\n        <Col xl={12}>\r\n          <Card>\r\n            <Card.Body>\r\n              <Row className=\"m-2\">\r\n                <Col md={6} />\r\n                <Col\r\n                  md={6}\r\n                  className=\"ml-lg-auto d-flex pt-2 pt-md-0 align-items-stretch justify-content-end\"\r\n                >\r\n                  <button\r\n                    onClick={handleAddBlog}\r\n                    className=\"btn btn-rounded btn-success\"\r\n                  >\r\n                    + Add\r\n                  </button>\r\n                </Col>\r\n              </Row>\r\n              <Form\r\n                className=\"forms-sample\"\r\n                onSubmit={searchHandleSubmit(onSubmitSearch)}\r\n              >\r\n                <Row>\r\n                  <Col md={3}>\r\n                    <Form.Group className=\"form-group\">\r\n                      <Form.Control\r\n                        type=\"text\"\r\n                        placeholder=\"Enter Title\"\r\n                        size=\"md\"\r\n                        {...search(\"title\")}\r\n                      />\r\n                    </Form.Group>\r\n                  </Col>\r\n                  <Col md={3}>\r\n                    <div className=\"pb-2 d-flex justify-content-end\">\r\n                      <button\r\n                        disabled={searchIsSubmitting}\r\n                        type=\"submit\"\r\n                        className=\"btn btn-gradient-primary mr-2\"\r\n                      >\r\n                        Search\r\n                      </button>\r\n                      {isDirty && (\r\n                        <button\r\n                          onClick={handleReset}\r\n                          type=\"reset\"\r\n                          className=\"btn btn-gradient-danger mr-2\"\r\n                        >\r\n                          Reset\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n              </Form>\r\n              <DataTableRemote\r\n                noHeader={true}\r\n                subHeader={false}\r\n                title=\"Blog\"\r\n                columns={columns}\r\n                data={blog}\r\n                addLink={handleAddBlog}\r\n                handlePageChange={handlePageChange}\r\n                handlePerRowsChange={handlePerRowsChange}\r\n                totalRows={totalRows}\r\n                progressPending={spinner}\r\n              />\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n      {modalShow && (\r\n        <ModalCommon\r\n          show={modalShow}\r\n          handleClose={handleModalClose}\r\n          size=\"lg\"\r\n          modalTitle={modalTitle}\r\n        >\r\n          {modalTitle &&\r\n            (modalTitle === \"Add Blog\" || modalTitle === \"Edit Blog\") && (\r\n              <Form onSubmit={handleSubmit(onSubmit)} className=\"pt-3\">\r\n                <Row>\r\n                  <Col md={2}>\r\n                    <Form.Label>Title  <Required/></Form.Label>\r\n                  </Col>\r\n                  <Col md={8}>\r\n                    <Form.Group className=\"search-field form-group\">\r\n                      <Form.Control\r\n                        {...register(\"title\")}\r\n                        type=\"text\"\r\n                        placeholder=\"Title\"\r\n                        className=\"h-auto w-25\"\r\n                      />\r\n                      <p className=\"text-danger text-start\">\r\n                        {errors.title?.message}\r\n                      </p>\r\n                    </Form.Group>\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col md={2}>\r\n                    <Form.Label>Blog Image  <Required/></Form.Label>\r\n                  </Col>\r\n                  <Col md={8}>\r\n                    <Form.Group className=\"search-field form-group\">\r\n                      <Form.Group className=\"search-field form-group\">\r\n                        <Form.Control\r\n                          {...register(\"blogImg\")}\r\n                          type=\"file\"\r\n                          className=\"h-auto w-25\"\r\n                          ref={fileInputRef}\r\n                          onChange={(e) => handleImageChange(e)}\r\n                          disabled={img}\r\n                        />\r\n                        {blogId && (\r\n                          <a href={imgSrc} rel=\"noreferrer\" target={\"_blank\"}>\r\n                            View Blog Image\r\n                          </a>\r\n                        )}\r\n                      </Form.Group>\r\n\r\n                      {previewImg && (\r\n                        <div className=\"d-block\">\r\n                          <div>\r\n                            <img alt=\"blog-img\" src={previewImg} width={250} height={250} />\r\n                          </div>\r\n                          {!imageId && (\r\n                            <Fragment>\r\n                              <button\r\n                                onClick={handleUploadImg}\r\n                                className=\"btn btn-rounded btn-success btn-sm mt-2\"\r\n                                type=\"button\"\r\n                              >\r\n                                Upload\r\n                              </button>\r\n                              <button\r\n                                onClick={handleCancelBlogImg}\r\n                                className=\"btn btn-rounded btn-danger btn-sm mt-2 mx-2\"\r\n                                type=\"button\"\r\n                              >\r\n                                Cancel\r\n                              </button>\r\n                            </Fragment>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                      <p className=\"text-danger text-start\">\r\n                        {errors.blogImg?.message}\r\n                      </p>\r\n                    </Form.Group>\r\n                  </Col>\r\n                </Row>\r\n                <Form.Label>Description  <Required/></Form.Label>\r\n                <Form.Group className=\"search-field form-group\">\r\n                  <CKEditor\r\n                    {...register(\"description\")}\r\n                    initData={descriptionText}\r\n                    onInstanceReady={handleInstanceReady}\r\n                    onChange={handleDescriptionChange}\r\n                  />\r\n                  <p className=\"text-danger text-start\">\r\n                    {errors.description?.message}\r\n                  </p>\r\n                </Form.Group>\r\n                <div className=\"mt-3\">\r\n                  <Button\r\n                    disabled={isSubmitting}\r\n                    className=\"btn btn-primary btn-sm font-weight-medium auth-form-btn\"\r\n                    type=\"submit\"\r\n                  >\r\n                    Submit\r\n                  </Button>\r\n                  <Button\r\n                    className=\"btn btn-danger btn-sm\"\r\n                    onClick={handleModalClose}\r\n                  >\r\n                    Close\r\n                  </Button>\r\n                </div>\r\n              </Form>\r\n            )}\r\n          {modalTitle && modalTitle === \"View Blog\" && getData && (\r\n            <div className=\"table-responsive\">\r\n              <table className=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Label</th>\r\n                    <th>Value</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>\r\n                      <h5 className=\"text-bold\">Title</h5>\r\n                    </td>\r\n                    <td>{getData.title}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>\r\n                      <h5 className=\"text-bold\">Description</h5>\r\n                    </td>\r\n                    <td\r\n                      dangerouslySetInnerHTML={{ __html: getData.description }}\r\n                    >\r\n                      {}\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Blog Image</td>\r\n                    <td>\r\n                      <img\r\n                        alt=\"blog-img\"\r\n                        className=\"w-25 h-25 rounded-0\"\r\n                        src={\r\n                          imageDomain +\r\n                          getData.blogImg?.imagePath +\r\n                          getData.blogImg?.images?.medium\r\n                        }\r\n                      />\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </ModalCommon>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Blog;"],"names":["validationSchema","Yup","shape","title","matches","required","blogImg","description","columns","name","selector","row","uri","author","moment","createdAt","format","cell","getActions","ignoreRowClick","grow","useForm","resolver","yupResolver","register","handleSubmit","formState","reset","setValue","errors","isSubmitting","editOnClick","handleEditBlog","viewOnClick","handleViewBlog","deleteOnClick","handleDeleteBlog","rowId","id","_id","fileInputRef","useRef","useState","pageFor","blog","setBlog","data","setData","getData","setGetData","modalShow","setModalShow","blogId","setBlogId","descriptionText","setDescriptionText","editorInstance","setEditorInstance","modalTitle","setModalTitle","totalRows","setTotalRows","perPage","setPerPage","img","setImage","previewImg","setPreviewImg","imageId","setImageId","spinner","setSpinner","CONST","filter","setFilter","reloadList","setReloadList","imageDomain","process","imgSrc","imagePath","originalImage","search","searchHandleSubmit","searchReset","isDirty","searchIsSubmitting","toggleReloadList","onSubmitSearch","values","utils","loadBlog","commonService","resp","meta","code","createBlog","value","payload","message","handleModalClose","updateBlog","undefined","handleUploadImg","formData","FormData","append","shouldValidate","handleModalShow","handleAddBlog","forEach","field","isComponentMounted","setComponentMounted","useEffect","loadAllBlog","masterService","BLOG_FILTER","blogs","pagination","totalCount","handleChange","reader","FileReader","onloadend","result","readAsDataURL","xl","className","md","onClick","onSubmit","type","placeholder","size","disabled","noHeader","subHeader","addLink","handlePageChange","page","skip","handlePerRowsChange","newPerPage","limit","progressPending","show","handleClose","ref","onChange","e","event","file","target","files","handleImageChange","href","rel","alt","src","width","height","Fragment","current","initData","onInstanceReady","editor","dangerouslySetInnerHTML","__html","images","medium"],"sourceRoot":""}
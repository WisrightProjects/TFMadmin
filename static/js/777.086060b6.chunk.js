"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[777],{6645:function(e,r,a){var s=a(3504),n=a(184);r.Z=function(e){var r=e.pageFor;return(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsx)("h3",{className:"page-title",children:r}),(0,n.jsx)("nav",{"aria-label":"breadcrumb",children:(0,n.jsxs)("ol",{className:"breadcrumb",children:[(0,n.jsx)("li",{className:"breadcrumb-item",children:(0,n.jsx)(s.rU,{to:"/",children:"Home"})}),(0,n.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:r})]})})]})}},4005:function(e,r,a){var s=a(184);r.Z=function(){return(0,s.jsx)("span",{className:"text-danger",children:"*"})}},2028:function(e,r,a){a.r(r);var s=a(1413),n=a(885),t=a(4165),l=a(5861),c=a(9140),i=a(3855),o=a(9743),d=a(2677),u=a(6645),m=a(1134),h=a(4695),x=a(1724),f=a(2791),p=a(9264),Z=a(6871),v=a(3504),j=a(4136),b=a(1645),g=a(5332),N=a(8687),C=a(4005),w=a(184),S="",y=!1,q="",k=!1,_="",P=!1,E=x.Ry().shape({name:x.Z_().required("Staff name is required").min(3,"Minimum 3 characters required").max(25,"Maximum 25 character allowed").test("Check Name","Staff name exists",function(){var e=(0,l.Z)((0,t.Z)().mark((function e(r){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S===r){e.next=6;break}return e.next=3,p.W4.isValid({name:r});case 3:a=e.sent,S=r,y=null===a||void 0===a||!a.data;case 6:return e.abrupt("return",y);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),phoneCode:x.Z_().required("Required"),status:x.Z_().required("Status is required"),email:x.Z_().required("Email is required").test("Check email","Email exists",function(){var e=(0,l.Z)((0,t.Z)().mark((function e(r){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_===r){e.next=6;break}return e.next=3,p.W4.isValid({email:r});case 3:a=e.sent,_=r,P=null===a||void 0===a||!a.data;case 6:return e.abrupt("return",P);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),phone:x.Z_().min(10).required("Phone is required").test("Check Phone","Phone number exists",function(){var e=(0,l.Z)((0,t.Z)().mark((function e(r){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q===r||10!==r.length){e.next=6;break}return e.next=3,p.W4.isValid({phone:r});case 3:a=e.sent,q=r,k=null===a||void 0===a||!a.data;case 6:return e.abrupt("return",k);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),pwd:x.Z_().required("Password is required").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/,"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and One Special Case Character"),role:x.Z_().required("Role is required")}),R=x.Ry().shape({name:x.Z_().required("Staff name is required"),phoneCode:x.Z_().required("Required"),phone:x.Z_().min(10).required("Phone is required"),status:x.Z_().required("Status is required")});r.default=function(){var e,r,a,x,S,y,q,k,_,P=(0,N.v9)((function(e){var r;return null===e||void 0===e||null===(r=e.common)||void 0===r?void 0:r.commonData})),M=(0,f.useState)(""),O=(0,n.Z)(M,2),B=O[0],I=O[1],H=(0,f.useState)("Staff"),L=(0,n.Z)(H,1)[0],W=(0,f.useState)((0,s.Z)({},j.oX.cQ)),D=(0,n.Z)(W,1)[0],U=(0,Z.UO)().staffId,A=!U,F=(0,f.useState)([]),J=(0,n.Z)(F,2),T=J[0],V=J[1],X=(0,f.useState)(!1),$=(0,n.Z)(X,2),z=$[0],G=$[1],Q=function(){return G(!z)},K=(0,Z.s0)(),Y=(0,m.cI)({mode:"onBlur",resolver:(0,h.X)(A?E:R)}),ee=Y.register,re=Y.handleSubmit,ae=Y.setValue,se=Y.reset,ne=Y.formState,te=ne.errors,le=ne.isSubmitting,ce=function(){var e=(0,l.Z)((0,t.Z)().mark((function e(r){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.branch=r.branch?r.branch:void 0,e.next=3,p.Jd.create(b.uh+"/staff-register",r);case 3:(a=e.sent)&&200===a.meta.code&&(j.P6.showSuccessMsg(j.oX.GH.RECORD_ADDED_SUCC),se(),j.P6.navigateTo(K(g.Wl)));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),ie=function(){var e=(0,l.Z)((0,t.Z)().mark((function e(r){var a,s,n,l,c,i,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.name,s=r.phoneCode,n=r.phone,l=r.branch,c=r.status,i={name:a,phoneCode:s,phone:n,branch:l||void 0,status:c},e.next=4,p.Jd.update(b.RC+"/"+U,i);case 4:(o=e.sent)&&200===o.meta.code&&(j.P6.showSuccessMsg(o.meta.message),j.P6.navigateTo(K(g.Wl)));case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,f.useEffect)((function(){var e=function(){var e=(0,l.Z)((0,t.Z)().mark((function e(){var r,a,s,n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Jd.getById(b.uh+"/"+U);case 2:(r=e.sent)&&200===r.meta.code&&(a=r.data,["name","phoneCode","phone","email","pwd","status","role"].forEach((function(e){return ae(e,a[e])})),a&&(s=a.branch,n=a.phone,ae("branch",s._id),I(n)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();U&&e()}),[U]),(0,f.useEffect)((function(){var e=function(){var e=(0,l.Z)((0,t.Z)().mark((function e(r){var a,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Jd.loadBranch(b.LC+"/filter",r);case 2:(a=e.sent)&&200===a.meta.code&&(s=a.data,V(s));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();e(D)}),[D]),(0,w.jsxs)(f.Fragment,{children:[(0,w.jsx)(u.Z,{pageFor:(A?"Add":"Edit")+" "+L}),(0,w.jsx)(c.Z,{children:(0,w.jsx)(c.Z.Body,{children:(0,w.jsxs)(i.Z,{autoComplete:"new-password",onSubmit:re((function(e){A?ce(e):ie(e)})),children:[(0,w.jsxs)(o.Z,{className:"form-group",children:[(0,w.jsx)(d.Z,{xl:6,md:6,lg:6,children:(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)("label",{className:"col-sm-3 col-form-label",children:"Branch"}),(0,w.jsx)("div",{className:"col-sm-9",children:(0,w.jsxs)(i.Z.Select,(0,s.Z)((0,s.Z)({className:"form-control"},ee("branch")),{},{children:[(0,w.jsx)("option",{value:"",children:"Select"}),T&&T.map((function(e,r){return(0,w.jsx)("option",{value:e._id,children:e.name},r)}))]}))})]})}),(0,w.jsx)(d.Z,{xl:6,md:6,lg:6,children:(0,w.jsxs)("div",{className:"row",children:[(0,w.jsxs)("label",{className:"col-sm-3 col-form-label",children:["Name ",(0,w.jsx)(C.Z,{})]}),(0,w.jsxs)("div",{className:"col-sm-9",children:[(0,w.jsx)(i.Z.Control,(0,s.Z)((0,s.Z)({},ee("name")),{},{className:"form-control",type:"text",placeholder:"Enter Staff Name",maxLength:25})),(0,w.jsx)("p",{className:"text-danger",children:null===(e=te.name)||void 0===e?void 0:e.message})]})]})})]}),(0,w.jsxs)(o.Z,{className:"form-group",children:[(0,w.jsx)(d.Z,{xl:6,md:6,lg:6,children:(0,w.jsxs)(o.Z,{children:[(0,w.jsxs)(d.Z,{sm:3,children:[" ",(0,w.jsxs)("label",{className:"form-label",children:["Email ",(0,w.jsx)(C.Z,{})]})]}),(0,w.jsxs)(d.Z,{sm:9,children:[(0,w.jsx)(i.Z.Control,(0,s.Z)((0,s.Z)({},ee("email")),{},{className:"form-control",type:"text",placeholder:"Enter Staff Email",disabled:!A})),(0,w.jsx)("p",{className:"text-danger",children:null===(r=te.email)||void 0===r?void 0:r.message})]})]})}),(0,w.jsx)(d.Z,{xl:6,md:6,lg:6,children:(0,w.jsxs)(o.Z,{children:[(0,w.jsx)(d.Z,{className:"form-label",children:(0,w.jsxs)("label",{className:"form-label",children:["Mobile ",(0,w.jsx)(C.Z,{})]})}),(0,w.jsx)(d.Z,{sm:9,children:(0,w.jsxs)(o.Z,{children:[(0,w.jsxs)(d.Z,{sm:4,children:[(0,w.jsxs)(i.Z.Select,(0,s.Z)((0,s.Z)({className:"form-control"},ee("phoneCode")),{},{children:[(0,w.jsx)("option",{value:"",label:"Select",children:"Select"}),(0,w.jsx)("option",{value:"+91",children:"India (+91)"}),(0,w.jsx)("option",{value:"61",children:"Australia (61)"})]})),(0,w.jsx)("p",{className:"text-danger",children:null===(a=te.phoneCode)||void 0===a?void 0:a.message})]}),(0,w.jsxs)(d.Z,{sm:8,children:[(0,w.jsx)(i.Z.Control,(0,s.Z)((0,s.Z)({},ee("phone")),{},{className:"form-control custome_num_input",type:"text",placeholder:"Enter Staff Mobile",maxLength:10,pattern:"[0-9]*",value:B,onChange:function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&(I(e.target.value),ae("phone",e.target.value))}})),(0,w.jsx)("p",{className:"text-danger text-start",children:null===(x=te.phone)||void 0===x?void 0:x.message})]})]})})]})})]}),(0,w.jsxs)(o.Z,{className:"form-group",children:[A&&(0,w.jsx)(d.Z,{xl:6,md:6,lg:6,children:(0,w.jsxs)(o.Z,{children:[(0,w.jsx)(d.Z,{sm:3,children:(0,w.jsxs)("label",{className:"form-label",children:["Password ",(0,w.jsx)(C.Z,{})]})}),(0,w.jsxs)(d.Z,{sm:9,className:"staff_password_input",children:[(0,w.jsx)(i.Z.Control,(0,s.Z)((0,s.Z)({},ee("pwd")),{},{className:"form-control",type:z?"text":"password",placeholder:"Enter Password",disabled:!A,maxLength:20})),z?(0,w.jsx)("i",{onClick:Q,className:"mdi mdi-eye"}):(0,w.jsx)("i",{onClick:Q,className:"mdi mdi-eye-off"}),(0,w.jsx)("p",{className:"text-danger",children:null===(S=te.pwd)||void 0===S?void 0:S.message})]})]})}),(0,w.jsx)(d.Z,{xl:6,md:6,lg:6,children:(0,w.jsxs)(o.Z,{children:[(0,w.jsx)(d.Z,{sm:3,children:(0,w.jsxs)("label",{className:"form-label",children:["Status ",(0,w.jsx)(C.Z,{})]})}),(0,w.jsxs)(d.Z,{sm:9,children:[(0,w.jsxs)(i.Z.Select,(0,s.Z)((0,s.Z)({},ee("status")),{},{className:"form-control",children:[(0,w.jsx)("option",{value:"",children:"Select"}),null===P||void 0===P||null===(y=P.userStatus)||void 0===y?void 0:y.map((function(e,r){return(0,w.jsx)("option",{value:e.code,children:e.label},r)}))]})),(0,w.jsx)("p",{className:"text-danger text-start",children:null===(q=te.status)||void 0===q?void 0:q.message})]})]})}),(0,w.jsx)(d.Z,{xl:6,md:6,lg:6,children:(0,w.jsxs)(o.Z,{children:[(0,w.jsx)(d.Z,{sm:3,children:(0,w.jsxs)("label",{className:"form-label",children:["Role ",(0,w.jsx)(C.Z,{})]})}),(0,w.jsxs)(d.Z,{sm:9,children:[(0,w.jsxs)(i.Z.Select,(0,s.Z)((0,s.Z)({},ee("role")),{},{className:"form-control",disabled:!A,children:[(0,w.jsx)("option",{value:"",children:"Select"}),null===P||void 0===P||null===(k=P.staffRegisterRoles)||void 0===k?void 0:k.map((function(e,r){return(0,w.jsx)("option",{value:e.code,children:e.label},r)}))]})),(0,w.jsx)("p",{className:"text-danger text-start",children:null===(_=te.role)||void 0===_?void 0:_.message})]})]})})]}),(0,w.jsx)("button",{disabled:le,type:"submit",className:"btn btn-rounded btn-success",children:"Submit"}),(0,w.jsx)(v.rU,{to:g.Wl,className:"btn btn-rounded btn-danger",children:"Cancel"})]})})})]})}},9140:function(e,r,a){a.d(r,{Z:function(){return P}});var s=a(1413),n=a(5987),t=a(1694),l=a.n(t),c=a(2791),i=a(162),o=a(6543),d=a(7472),u=a(184),m=["bsPrefix","className","variant","as"],h=c.forwardRef((function(e,r){var a=e.bsPrefix,t=e.className,c=e.variant,o=e.as,d=void 0===o?"img":o,h=(0,n.Z)(e,m),x=(0,i.vE)(a,"card-img");return(0,u.jsx)(d,(0,s.Z)({ref:r,className:l()(c?"".concat(x,"-").concat(c):x,t)},h))}));h.displayName="CardImg";var x=h,f=a(6040),p=["bsPrefix","className","as"],Z=c.forwardRef((function(e,r){var a=e.bsPrefix,t=e.className,o=e.as,d=void 0===o?"div":o,m=(0,n.Z)(e,p),h=(0,i.vE)(a,"card-header"),x=(0,c.useMemo)((function(){return{cardHeaderBsPrefix:h}}),[h]);return(0,u.jsx)(f.Z.Provider,{value:x,children:(0,u.jsx)(d,(0,s.Z)((0,s.Z)({ref:r},m),{},{className:l()(t,h)}))})}));Z.displayName="CardHeader";var v=Z,j=["bsPrefix","className","bg","text","border","body","children","as"],b=(0,d.Z)("h5"),g=(0,d.Z)("h6"),N=(0,o.Z)("card-body"),C=(0,o.Z)("card-title",{Component:b}),w=(0,o.Z)("card-subtitle",{Component:g}),S=(0,o.Z)("card-link",{Component:"a"}),y=(0,o.Z)("card-text",{Component:"p"}),q=(0,o.Z)("card-footer"),k=(0,o.Z)("card-img-overlay"),_=c.forwardRef((function(e,r){var a=e.bsPrefix,t=e.className,c=e.bg,o=e.text,d=e.border,m=e.body,h=e.children,x=e.as,f=void 0===x?"div":x,p=(0,n.Z)(e,j),Z=(0,i.vE)(a,"card");return(0,u.jsx)(f,(0,s.Z)((0,s.Z)({ref:r},p),{},{className:l()(t,Z,c&&"bg-".concat(c),o&&"text-".concat(o),d&&"border-".concat(d)),children:m?(0,u.jsx)(N,{children:h}):h}))}));_.displayName="Card",_.defaultProps={body:!1};var P=Object.assign(_,{Img:x,Title:C,Subtitle:w,Body:N,Link:S,Text:y,Header:v,Footer:q,ImgOverlay:k})},6040:function(e,r,a){var s=a(2791).createContext(null);s.displayName="CardHeaderContext",r.Z=s},7472:function(e,r,a){var s=a(1413),n=a(2791),t=a(1694),l=a.n(t),c=a(184);r.Z=function(e){return n.forwardRef((function(r,a){return(0,c.jsx)("div",(0,s.Z)((0,s.Z)({},r),{},{ref:a,className:l()(r.className,e)}))}))}}}]);
//# sourceMappingURL=777.086060b6.chunk.js.map
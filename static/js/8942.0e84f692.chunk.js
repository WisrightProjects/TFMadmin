"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[8942],{8942:function(e,t,n){n.r(t);var r=n(4165),s=n(5861),i=n(1413),a=n(885),l=n(9743),c=n(2677),o=n(9140),u=n(3855),d=n(3360),m=n(3024),h=n(2791),p=n(9264),f=n(8982),x=n(1134),g=n(4695),Z=n(1724),b=n(4136),j=n(4206),v=n(7006),w=n(6645),y=n(2426),k=n.n(y),S=n(1645),N=n(4005),C=n(184),I=Z.Ry().shape({title:Z.Z_().matches("^[0-9a-zA-Z \b]+$","Invalid title, is required").required(),blogImg:Z.nK().required("Blog image is required"),description:Z.Z_().required("Description is required")});t.default=function(){var e,t,n,Z,y,B,D,E,P=[{name:"Title",selector:function(e){return e.title}},{name:"URI",selector:function(e){return e.uri}},{name:"Author",selector:function(e){return e.author}},{name:"Created At",selector:function(e){return k()(e.createdAt).format("DD-mm-yyyy")}},{name:"Action",cell:function(e){return F(e)},ignoreRowClick:!0,grow:1}],A=(0,x.cI)({resolver:(0,g.X)(I)}),R=A.register,_=A.handleSubmit,T=A.formState,L=A.reset,M=A.setValue,q=T.errors,V=T.isSubmitting,F=function(e){return(0,C.jsx)(j.Z,{editOnClick:bt,viewOnClick:jt,deleteOnClick:vt,rowId:e.uri,id:e._id})},G=(0,h.useRef)(),J=(0,h.useState)("Blogs"),U=(0,a.Z)(J,1)[0],z=(0,h.useState)([]),H=(0,a.Z)(z,2),O=H[0],X=H[1],K=(0,h.useState)(),W=(0,a.Z)(K,2),$=W[0],Q=W[1],Y=(0,h.useState)(null),ee=(0,a.Z)(Y,2),te=ee[0],ne=ee[1],re=(0,h.useState)(!1),se=(0,a.Z)(re,2),ie=se[0],ae=se[1],le=(0,h.useState)(""),ce=(0,a.Z)(le,2),oe=ce[0],ue=ce[1],de=(0,h.useState)(""),me=(0,a.Z)(de,2),he=me[0],pe=me[1],fe=(0,h.useState)(!1),xe=(0,a.Z)(fe,2),ge=xe[0],Ze=xe[1],be=(0,h.useState)(""),je=(0,a.Z)(be,2),ve=je[0],we=je[1],ye=(0,h.useState)(0),ke=(0,a.Z)(ye,2),Se=ke[0],Ne=ke[1],Ce=(0,h.useState)(10),Ie=(0,a.Z)(Ce,2),Be=Ie[0],De=Ie[1],Ee=(0,h.useState)(null),Pe=(0,a.Z)(Ee,2),Ae=Pe[0],Re=Pe[1],_e=(0,h.useState)(null),Te=(0,a.Z)(_e,2),Le=Te[0],Me=Te[1],qe=(0,h.useState)(null),Ve=(0,a.Z)(qe,2),Fe=Ve[0],Ge=Ve[1],Je=(0,h.useState)(!0),Ue=(0,a.Z)(Je,2),ze=Ue[0],He=Ue[1],Oe=(0,h.useState)((0,i.Z)({},b.oX.XW)),Xe=(0,a.Z)(Oe,2),Ke=Xe[0],We=Xe[1],$e=(0,h.useState)(!1),Qe=(0,a.Z)($e,2),Ye=Qe[0],et=Qe[1],tt="https://api.truefriendmatrimony.com",nt=tt+(null===$||void 0===$||null===(e=$.blogImg)||void 0===e?void 0:e.imagePath)+(null===$||void 0===$||null===(t=$.blogImg)||void 0===t?void 0:t.originalImage),rt=(0,x.cI)(),st=rt.register,it=rt.handleSubmit,at=rt.reset,lt=rt.formState,ct=lt.isDirty,ot=lt.isSubmitting,ut=function(){return et(!Ye)},dt=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(n=t.title)){e.next=4;break}return b.P6.showErrMsg("Title is required"),e.abrupt("return",!1);case 4:We((0,i.Z)((0,i.Z)({},Ke),{},{search:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mt=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Jd.getBlog(t);case 2:if(!(n=e.sent)||200!==n.meta.code){e.next=5;break}return e.abrupt("return",n.data);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n,s,i,a,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,s=t.description,i={title:n,description:s,blogImg:Fe},e.next=4,p.Jd.createBlog(i);case 4:if(a=e.sent,200!==(l=a.meta).code){e.next=13;break}b.P6.showSuccessMsg(l.message),L(),gt(),ut(),e.next=15;break;case 13:return b.P6.showErrMsg(l.message),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s,i,a,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.title,i=n.description,a={title:s,description:i,blogImg:Fe||void 0},e.next=4,p.Jd.updateBlog(t,a);case 4:if(l=e.sent,200!==(c=l.meta).code){e.next=13;break}b.P6.showSuccessMsg(c.message),L(),gt(),ut(),e.next=15;break;case 13:return b.P6.showErrMsg(c.message),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ft=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("type",30),t.append("images",Ae),e.next=5,p.Jd.imageUpload(t);case 5:(n=e.sent)&&200===n.meta.code&&(M("blogImg",Ae,{shouldValidate:!0}),s=n.data,Ge(s[0]._id));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xt=function(){return ae(!0)},gt=function(){ae(!1),pe(""),L(),Me(null),Re(null),Ge("")},Zt=function(){xt(),we("Add Blog"),ue(""),ne(null)},bt=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(t);case 2:n=e.sent,we("Edit Blog"),xt(),ue(t),n&&(Q(n),ne(n),pe(n.description),["title","description"].forEach((function(e){return M(e,n[e])})),M("description",n.description),M("blogImg",[null===n||void 0===n||null===(s=n.blogImg)||void 0===s?void 0:s._id],{shouldValidate:!0}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jt=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(t);case 2:(n=e.sent)&&(we("View Blog"),xt(),ne(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Jd.deleteBlog(n);case 2:(s=e.sent)&&200===s.meta.code&&(b.P6.showSuccessMsg(s.meta.message),ut());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),wt=(0,h.useState)(!1),yt=(0,a.Z)(wt,2),kt=yt[0],St=yt[1];(0,h.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,n,s,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return He(!0),e.next=3,p.LT.getAllPost(S.mF,Ke);case 3:(n=e.sent)&&200===(null===n||void 0===n||null===(t=n.meta)||void 0===t?void 0:t.code)&&(s=n.data,i=n.pagination,Ne(i.totalCount),X(s),He(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var t=(0,s.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Ke);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();kt&&t()}),[kt,Ke,Ye]),(0,h.useEffect)((function(){St(!0)}),[]),(0,h.useEffect)((function(){ge&&ge.setData(he)}),[ge]),(0,h.useEffect)((function(){ge&&ge.setData(he)}),[$]),(0,h.useEffect)((function(){if(Ae){var e=new FileReader;e.onloadend=function(){Me(e.result)},e.readAsDataURL(Ae)}else Me(null)}),[Ae]);return(0,C.jsxs)("div",{children:[(0,C.jsx)(w.Z,{pageFor:U}),(0,C.jsx)(l.Z,{children:(0,C.jsx)(c.Z,{xl:12,children:(0,C.jsx)(o.Z,{children:(0,C.jsxs)(o.Z.Body,{children:[(0,C.jsxs)(l.Z,{className:"m-2",children:[(0,C.jsx)(c.Z,{md:6}),(0,C.jsx)(c.Z,{md:6,className:"ml-lg-auto d-flex pt-2 pt-md-0 align-items-stretch justify-content-end",children:(0,C.jsx)("button",{onClick:Zt,className:"btn btn-rounded btn-success",children:"+ Add"})})]}),(0,C.jsx)(u.Z,{className:"forms-sample",onSubmit:it(dt),children:(0,C.jsxs)(l.Z,{children:[(0,C.jsx)(c.Z,{md:3,children:(0,C.jsx)(u.Z.Group,{className:"form-group",children:(0,C.jsx)(u.Z.Control,(0,i.Z)({type:"text",placeholder:"Enter Title",size:"md"},st("title")))})}),(0,C.jsx)(c.Z,{md:3,children:(0,C.jsxs)("div",{className:"pb-2 d-flex justify-content-end",children:[(0,C.jsx)("button",{disabled:ot,type:"submit",className:"btn btn-gradient-primary mr-2",children:"Search"}),ct&&(0,C.jsx)("button",{onClick:function(){at(),We((0,i.Z)((0,i.Z)({},Ke),{},{search:""}))},type:"reset",className:"btn btn-gradient-danger mr-2",children:"Reset"})]})})]})}),(0,C.jsx)(m.Z,{noHeader:!0,subHeader:!1,title:"Blog",columns:P,data:O,addLink:Zt,handlePageChange:function(e){We((0,i.Z)((0,i.Z)({},Ke),{},{skip:e>1?(e-1)*Be:0}))},handlePerRowsChange:function(e,t){De(e),We((0,i.Z)((0,i.Z)({},Ke),{},{skip:t>1?(t-1)*Be:0,limit:e}))},totalRows:Se,progressPending:ze})]})})})}),ie&&(0,C.jsxs)(f.Z,{show:ie,handleClose:gt,size:"lg",modalTitle:ve,children:[ve&&("Add Blog"===ve||"Edit Blog"===ve)&&(0,C.jsxs)(u.Z,{onSubmit:_((function(e){return $?pt(oe,e):ht(e)})),className:"pt-3",children:[(0,C.jsxs)(l.Z,{children:[(0,C.jsx)(c.Z,{md:2,children:(0,C.jsxs)(u.Z.Label,{children:["Title  ",(0,C.jsx)(N.Z,{})]})}),(0,C.jsx)(c.Z,{md:8,children:(0,C.jsxs)(u.Z.Group,{className:"search-field form-group",children:[(0,C.jsx)(u.Z.Control,(0,i.Z)((0,i.Z)({},R("title")),{},{type:"text",placeholder:"Title",className:"h-auto w-25"})),(0,C.jsx)("p",{className:"text-danger text-start",children:null===(n=q.title)||void 0===n?void 0:n.message})]})})]}),(0,C.jsxs)(l.Z,{children:[(0,C.jsx)(c.Z,{md:2,children:(0,C.jsxs)(u.Z.Label,{children:["Blog Image  ",(0,C.jsx)(N.Z,{})]})}),(0,C.jsx)(c.Z,{md:8,children:(0,C.jsxs)(u.Z.Group,{className:"search-field form-group",children:[(0,C.jsxs)(u.Z.Group,{className:"search-field form-group",children:[(0,C.jsx)(u.Z.Control,(0,i.Z)((0,i.Z)({},R("blogImg")),{},{type:"file",className:"h-auto w-25",ref:G,onChange:function(e){return function(e){var t=e.target.files[0];Re(t||null)}(e)},disabled:Ae})),oe&&(0,C.jsx)("a",{href:nt,rel:"noreferrer",target:"_blank",children:"View Blog Image"})]}),Le&&(0,C.jsxs)("div",{className:"d-block",children:[(0,C.jsx)("div",{children:(0,C.jsx)("img",{alt:"blog-img",src:Le,width:250,height:250})}),!Fe&&(0,C.jsxs)(h.Fragment,{children:[(0,C.jsx)("button",{onClick:ft,className:"btn btn-rounded btn-success btn-sm mt-2",type:"button",children:"Upload"}),(0,C.jsx)("button",{onClick:function(){Me(null),Re(null),G.current.value=null},className:"btn btn-rounded btn-danger btn-sm mt-2 mx-2",type:"button",children:"Cancel"})]})]}),(0,C.jsx)("p",{className:"text-danger text-start",children:null===(Z=q.blogImg)||void 0===Z?void 0:Z.message})]})})]}),(0,C.jsxs)(u.Z.Label,{children:["Description  ",(0,C.jsx)(N.Z,{})]}),(0,C.jsxs)(u.Z.Group,{className:"search-field form-group",children:[(0,C.jsx)(v.vM,(0,i.Z)((0,i.Z)({},R("description")),{},{initData:he,onInstanceReady:function(e){var t=e.editor;Ze(t)},onChange:function(e){var t=e.editor.getData();M("description",t),pe(t)}})),(0,C.jsx)("p",{className:"text-danger text-start",children:null===(y=q.description)||void 0===y?void 0:y.message})]}),(0,C.jsxs)("div",{className:"mt-3",children:[(0,C.jsx)(d.Z,{disabled:V,className:"btn btn-primary btn-sm font-weight-medium auth-form-btn",type:"submit",children:"Submit"}),(0,C.jsx)(d.Z,{className:"btn btn-danger btn-sm",onClick:gt,children:"Close"})]})]}),ve&&"View Blog"===ve&&te&&(0,C.jsx)("div",{className:"table-responsive",children:(0,C.jsxs)("table",{className:"table",children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{children:"Label"}),(0,C.jsx)("th",{children:"Value"})]})}),(0,C.jsxs)("tbody",{children:[(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:(0,C.jsx)("h5",{className:"text-bold",children:"Title"})}),(0,C.jsx)("td",{children:te.title})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:(0,C.jsx)("h5",{className:"text-bold",children:"Description"})}),(0,C.jsx)("td",{dangerouslySetInnerHTML:{__html:te.description}})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:"Blog Image"}),(0,C.jsx)("td",{children:(0,C.jsx)("img",{alt:"blog-img",className:"w-25 h-25 rounded-0",src:tt+(null===(B=te.blogImg)||void 0===B?void 0:B.imagePath)+(null===(D=te.blogImg)||void 0===D||null===(E=D.images)||void 0===E?void 0:E.medium)})})]})]})]})})]})]})}}}]);
//# sourceMappingURL=8942.0e84f692.chunk.js.map